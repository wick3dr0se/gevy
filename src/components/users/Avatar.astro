---
import { Image } from "astro:assets";

interface Props {
  user: {
    avatar_url?: string | null;
    github_avatar_url?: string | null;
    username?: string | null;
    github_username?: string | null;
  };
  size?: number;
  class?: string;
  loading?: "lazy" | "eager";
}

const {
  user,
  size = 40,
  class: className = "",
  loading = "lazy",
} = Astro.props;

const avatarUrl = user?.username
  ? `https://api.dicebear.com/7.x/avataaars/svg?seed=${user.username}`
  : (user?.github_avatar_url ?? "/default-avatar.svg");

const alt = user?.username || user?.github_username || "User";
---

<Image
  src={avatarUrl}
  alt={alt}
  width={size}
  height={size}
  class={`rounded-full ${className}`}
  loading={loading}
/>
