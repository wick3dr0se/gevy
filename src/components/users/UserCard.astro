---
import Avatar from "./Avatar.astro";
import FollowButton from "../FollowButton.astro";

interface Props {
  profile: any;
  isFollowing: boolean;
}

const { profile, isFollowing } = Astro.props;
---

<div class="rounded-lg shadow-sm border p-6">
  <div class="flex items-start gap-4">
    <Avatar
      user={{
        username: profile.username,
        github_username: profile.github_username,
        github_avatar_url: profile.github_avatar_url,
        avatar_url: profile.avatar_url,
      }}
      size={64}
    />

    <div class="flex-1 min-w-0">
      <a
        href={`/profile/${profile.username || profile.github_username}`}
        class="font-semibold text-gray-900 dark:text-white hover:underline block truncate"
      >
        {profile.display_name || profile.username || profile.github_username}
      </a>
      <p class="text-sm text-[var(--subtext)] truncate">
        @{profile.github_username || profile.username}
      </p>

      {
        profile.bio && (
          <p class="text-sm text-[var(--subtext)] mt-2 line-clamp-2">
            {profile.bio}
          </p>
        )
      }

      <div class="mt-3 flex gap-4 text-xs text-[var(--subtext)]">
        <span>
          <span>{profile.followers_count || 0}</span> followers
        </span>
      </div>

      <FollowButton
        followingId={profile.id}
        isFollowing={isFollowing}
        fullWidth={true}
        class="mt-4 text-sm"
      />
    </div>
  </div>
</div>
